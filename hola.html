import React, { useState, useEffect } from 'react';

// Main App component
const App = () => {
    const [birthDay, setBirthDay] = useState('');
    const [birthMonth, setBirthMonth] = useState('');
    const [birthYearBE, setBirthYearBE] = useState(''); // Buddhist Era
    const [generalFortune, setGeneralFortune] = useState('');
    const [monthlyFortune, setMonthlyFortune] = useState('');
    const [luckyNumbers, setLuckyNumbers] = useState([]);
    const [currentMonthName, setCurrentMonthName] = useState('');
    const [errorMessage, setErrorMessage] = useState('');

    // Function to get Thai month name
    const getThaiMonthName = (monthIndex) => {
        const thaiMonths = [
            '‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå', '‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°', '‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô', '‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°', '‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô',
            '‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°', '‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°', '‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô', '‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°', '‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô', '‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°'
        ];
        return thaiMonths[monthIndex];
    };

    useEffect(() => {
        const today = new Date();
        setCurrentMonthName(getThaiMonthName(today.getMonth()));
    }, []);

    // Simplified fortune telling logic (for demonstration purposes only)
    const predictFortune = () => {
        setErrorMessage(''); // Clear previous errors

        const day = parseInt(birthDay);
        const month = parseInt(birthMonth);
        const yearBE = parseInt(birthYearBE);

        if (isNaN(day) || isNaN(month) || isNaN(yearBE) || day < 1 || day > 31 || month < 1 || month > 12 || yearBE < 2400 || yearBE > 2600) {
            setErrorMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ß‡∏±‡∏ô ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏õ‡∏µ ‡∏û.‡∏®. ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 2400-2600)');
            setGeneralFortune('');
            setMonthlyFortune('');
            setLuckyNumbers([]);
            return;
        }

        // General Fortune (simplified based on birth year)
        let general = '';
        const yearMod = yearBE % 10;
        if (yearMod === 0 || yearMod === 5) {
            general = '‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏î‡∏µ ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï';
        } else if (yearMod === 1 || yearMod === 6) {
            general = '‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏à‡∏∂‡∏á‡∏à‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à';
        } else if (yearMod === 2 || yearMod === 7) {
            general = '‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á ‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏™‡∏£‡∏£‡∏Ñ‡∏ö‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏û‡πâ‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ';
        } else if (yearMod === 3 || yearMod === 8) {
            general = '‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏°‡∏µ‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏† ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û';
        } else { // 4, 9
            general = '‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏™‡∏ö‡∏≤‡∏¢ ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ñ‡∏≠‡∏¢‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå';
        }
        setGeneralFortune(general);

        // Monthly Fortune (simplified based on birth month and current month)
        const currentMonthIndex = new Date().getMonth() + 1; // 1-12
        let monthly = '';
        if ((month + currentMonthIndex) % 3 === 0) {
            monthly = '‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô';
        } else if ((month + currentMonthIndex) % 3 === 1) {
            monthly = '‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á';
        } else {
            monthly = '‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÑ‡∏î‡πâ‡∏û‡∏ö‡∏õ‡∏∞‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÜ ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÇ‡∏ä‡∏Ñ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏¥‡∏î';
        }
        setMonthlyFortune(monthly);

        // Lucky Numbers (simplified random generation)
        const numbers = [];
        for (let i = 0; i < 3; i++) {
            numbers.push(Math.floor(Math.random() * 90) + 10); // 10-99
        }
        setLuckyNumbers(numbers);
    };

    return (
        <div className="min-h-screen bg-gradient-to-br from-purple-100 to-blue-200 flex items-center justify-center p-4 font-inter">
            <div className="bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg">
                <h1 className="text-3xl font-bold text-center text-purple-800 mb-6">
                    <span role="img" aria-label="star" className="mr-2">‚ú®</span>
                    ‡πÅ‡∏≠‡∏õ‡∏ú‡∏π‡∏Å‡∏î‡∏ß‡∏á ‡πÇ‡∏´‡∏£‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÑ‡∏ó‡∏¢
                    <span role="img" aria-label="star" className="ml-2">‚ú®</span>
                </h1>

                <div className="mb-6">
                    <label htmlFor="birthDay" className="block text-gray-700 text-sm font-semibold mb-2">
                        ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:
                    </label>
                    <input
                        type="number"
                        id="birthDay"
                        className="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
                        placeholder="‡πÄ‡∏ä‡πà‡∏ô 15"
                        value={birthDay}
                        onChange={(e) => setBirthDay(e.target.value)}
                        min="1"
                        max="31"
                    />
                </div>

                <div className="mb-6">
                    <label htmlFor="birthMonth" className="block text-gray-700 text-sm font-semibold mb-2">
                        ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:
                    </label>
                    <input
                        type="number"
                        id="birthMonth"
                        className="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
                        placeholder="‡πÄ‡∏ä‡πà‡∏ô 1 (‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°)"
                        value={birthMonth}
                        onChange={(e) => setBirthMonth(e.target.value)}
                        min="1"
                        max="12"
                    />
                </div>

                <div className="mb-8">
                    <label htmlFor="birthYearBE" className="block text-gray-700 text-sm font-semibold mb-2">
                        ‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î (‡∏û.‡∏®.):
                    </label>
                    <input
                        type="number"
                        id="birthYearBE"
                        className="shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200"
                        placeholder="‡πÄ‡∏ä‡πà‡∏ô 2522"
                        value={birthYearBE}
                        onChange={(e) => setBirthYearBE(e.target.value)}
                        min="2400"
                        max="2600"
                    />
                </div>

                {errorMessage && (
                    <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6" role="alert">
                        <strong className="font-bold">‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:</strong>
                        <span className="block sm:inline ml-2">{errorMessage}</span>
                    </div>
                )}

                <button
                    onClick={predictFortune}
                    className="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75 transition duration-300 transform hover:scale-105 shadow-lg"
                >
                    <span role="img" aria-label="crystal ball" className="mr-2">üîÆ</span>
                    ‡∏ó‡πç‡∏≤‡∏ô‡∏≤‡∏¢‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤
                </button>

                {(generalFortune || monthlyFortune || luckyNumbers.length > 0) && (
                    <div className="mt-8 pt-8 border-t-2 border-purple-200">
                        <h2 className="text-2xl font-bold text-center text-purple-700 mb-4">
                            ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢
                        </h2>
                        {generalFortune && (
                            <div className="bg-purple-50 p-4 rounded-lg mb-4 shadow-md">
                                <h3 className="text-lg font-semibold text-purple-800 mb-2">
                                    <span role="img" aria-label="sparkles" className="mr-2">‚ú®</span>
                                    ‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡∏Ñ‡∏£‡πà‡∏≤‡∏ß‡πÜ:
                                </h3>
                                <p className="text-gray-800">{generalFortune}</p>
                            </div>
                        )}
                        {monthlyFortune && (
                            <div className="bg-purple-50 p-4 rounded-lg mb-4 shadow-md">
                                <h3 className="text-lg font-semibold text-purple-800 mb-2">
                                    <span role="img" aria-label="calendar" className="mr-2">üóìÔ∏è</span>
                                    ‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {currentMonthName}:
                                </h3>
                                <p className="text-gray-800">{monthlyFortune}</p>
                            </div>
                        )}
                        {luckyNumbers.length > 0 && (
                            <div className="bg-purple-50 p-4 rounded-lg shadow-md">
                                <h3 className="text-lg font-semibold text-purple-800 mb-2">
                                    <span role="img" aria-label="clover" className="mr-2">üçÄ</span>
                                    ‡πÄ‡∏•‡∏Ç‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô {currentMonthName}:
                                </h3>
                                <p className="text-gray-800 text-xl font-bold">
                                    {luckyNumbers.join(', ')}
                                </p>
                            </div>
                        )}
                    </div>
                )}
            </div>
        </div>
    );
};

export default App;
